---
import { useSanityClient } from "@sanity/astro";

import Layout from "../layouts/Layout.astro";
// const response = await fetch("https://picsum.photos/v2/list?page=2&limit=20");
// const photos = await response.json();

const images = await useSanityClient().fetch(`*[_type == 'imageContent']{
                                                title,
                                                "imageUrl": imageField.asset->url
                                              }`);
---

<Layout>
  <div class="content">
    <h1 transition:name="title">Hello World</h1>
    <div class="row">
      <div class="col">
        {
          images.map((image: any, i: number) => {
            if (i % 3 == 0) {
              return <img src={`${image.imageUrl}?w=1000`} alt={image.title} />;
            }
          })
        }
      </div>
      <div class="col">
        {
          images.map((image: any, i: number) => {
            if (i % 3 == 1) {
              return <img src={`${image.imageUrl}?w=1000`} alt={image.title} />;
            }
          })
        }
      </div>
      <div class="col">
        {
          images.map((image: any, i: number) => {
            if (i % 3 == 2) {
              return <img src={`${image.imageUrl}?w=1000`} alt={image.title} />;
            }
          })
        }
      </div>
    </div>
  </div>
</Layout>

<style lang="scss">
  .content {
    background-color: yellow;

    h1 {
      color: blue;
    }

    .row {
      display: flex;
      gap: 1rem;
    }

    .col {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    img {
      object-fit: cover;
      display: flex;
      flex-grow: 1;
      max-width: 100%;
      height: auto;
      border: solid 1px white;
    }
  }
</style>
